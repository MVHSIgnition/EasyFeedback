<html>
<body>
<h1 id="question"></h1>
<button id="btn" onclick="startPoll()">Publish Question</button>

<p id="a" style="visibility:hidden">a: 0</p>
<p id="b" style="visibility:hidden">b: 0</p>
<p id="c" style="visibility:hidden">c: 0</p>
<p id="d" style="visibility:hidden">d: 0</p>
</body>




</html>
<script src=http://cdn.pubnub.com/pubnub.min.js></script>
<script>function startPoll(){
var question = "how many licks does it take to get to the center of a tootsie pop?";
var answers = ["1","2","3","chomp"];
var qhtml = PUBNUB.$('question');
var anum = 0, bnum = 0, cnum =0, dnum = 0;
var pubnub = PUBNUB.init({publish_key:'pub-c-afbd56e9-6341-4a07-b493-cbb3ebf25284',subscribe_key:'sub-c-d785fd74-f08e-11e6-9283-02ee2ddab7fe',ssl:true});
var a = PUBNUB.$('a'), b = PUBNUB.$('b'), c = PUBNUB.$('c'), d = PUBNUB.$('d'), button = PUBNUB.$('btn');
a.style.visibility = "visible";
b.style.visibility = "visible";
c.style.visibility = "visible";
d.style.visibility = "visible";
button.style.visibility = "hidden";


qhtml.innerHTML = question;
var channels = ['t_handler','s_handler'];
pubnub.subscribe({
    channel  : channels,
    callback : function(message) { 
		if(message[0] === 1){
			if(message[1] === 0){
				anum += 1;
				a.innerHTML = "a: "+anum;
			}
			else if(message[1] == 1){
				bnum += 1;
				b.innerHTML = "b: "+bnum;
			}
			else if(message[1] == 2){
				cnum += 1;
				c.innerHTML = "c: "+cnum;
			}
			else if(message[1] == 3){
				dnum += 1;
				d.innerHTML = "d: "+dnum;
			}
		}
	}
});
pubnub.publish({
        channel : "s_handler", message : [0,question, answers]
    })

}</script>

